<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentå¸–å­çº¢è‰²æ¸²æŸ“æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
        }
        .test-section h3 {
            margin-top: 0;
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
        }
        
        /* Agentå¸–å­æ ·å¼ */
        .post-item {
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            background: #fff;
        }
        
        .post-item.agent-post {
            border-left: 4px solid #e53e3e !important;
            background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%) !important;
            box-shadow: 0 2px 8px rgba(229, 62, 62, 0.1) !important;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .user-id {
            font-weight: bold;
            margin-right: 10px;
        }
        
        .agent-badge {
            background: #e53e3e;
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 2px;
        }
        
        .post-content {
            margin: 10px 0;
            line-height: 1.5;
        }
        
        .post-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #666;
            margin-top: 10px;
        }
        
        /* è½¬æ’­æ ‘èŠ‚ç‚¹æ ·å¼æ¨¡æ‹Ÿ */
        .tree-demo {
            background: #f0f8ff;
            padding: 20px;
            border-radius: 6px;
            margin: 15px 0;
        }
        
        .tree-node {
            display: inline-block;
            margin: 5px;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            position: relative;
        }
        
        .tree-node.normal {
            border: 2px solid #64b5f6;
            background: white;
            color: #1976d2;
        }
        
        .tree-node.agent {
            border: 3px solid #e53e3e;
            background: #fff5f5;
            color: #c62828;
            font-weight: bold;
            padding: 10px 15px;  /* æ›´å¤§çš„padding */
            font-size: 13px;     /* ç¨å¤§çš„å­—ä½“ */
        }
        
        .tree-node.supplementary {
            border: 2px solid #4caf50;
            background: #f1f8e9;
            color: #2e7d32;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }
        
        .stat-card.agent-stats {
            background: linear-gradient(135deg, #fff5f5 0%, #ffe7e7 100%);
            border: 1px solid #ffcdd2;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
        }
        
        .stat-value.agent-value {
            color: #e53e3e;
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        
        button:hover {
            background-color: #0056b3;
        }
        
        button.agent-button {
            background-color: #e53e3e;
        }
        
        button.agent-button:hover {
            background-color: #c62828;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”´ Agentå¸–å­çº¢è‰²æ¸²æŸ“æ•ˆæœæµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>ğŸ“ å¸–å­åˆ—è¡¨æ¸²æŸ“æ•ˆæœ</h3>
            
            <!-- æ™®é€šå¸–å­ç¤ºä¾‹ -->
            <div class="post-item">
                <div class="user-info">
                    <span class="user-id">æ™®é€šç”¨æˆ·123</span>
                </div>
                <div class="post-content">
                    è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„å¾®åšå¸–å­ï¼Œå±•ç¤ºäº†æ ‡å‡†çš„æ˜¾ç¤ºæ ·å¼ã€‚æ²¡æœ‰ç‰¹æ®Šçš„é¢œè‰²æ ‡è¯†ã€‚
                </div>
                <div class="post-meta">
                    <span>2å°æ—¶å‰</span>
                    <span>ğŸ‘ 12 ğŸ’¬ 5 ğŸ”„ 3</span>
                </div>
            </div>
            
            <!-- Agentç”Ÿæˆå¸–å­ç¤ºä¾‹ -->
            <div class="post-item agent-post">
                <div class="user-info">
                    <span class="user-id">agent_004</span>
                    <span class="agent-badge">ğŸ¤– AI</span>
                </div>
                <div class="post-content">
                    å¤®è§†ç»ˆäºä»‹å…¥è°ƒæŸ¥äº†ï¼å¸Œæœ›è¿™æ¬¡èƒ½è¿˜åŸçœŸç›¸ï¼Œåˆ«è®©åª’ä½“å’ŒåŒ»é—¹æ¯äº†åŒ»æ‚£ä¿¡ä»»ã€‚å®¶å±æ‹’ç»æ²»ç–—è¿˜ç´¢è¦é«˜é¢èµ”å¿ï¼Œè¿™ä¸æ˜¯é—¹äº‹æ˜¯ä»€ä¹ˆï¼Ÿ
                </div>
                <div class="post-meta">
                    <span>1å°æ—¶å‰ (AIä»¿çœŸç”Ÿæˆ)</span>
                    <span>ğŸ˜Š 0.6 ğŸ“Š 0.8 ğŸ¯ ['å¤®è§†è°ƒæŸ¥', 'åŒ»æ‚£ä¿¡ä»»', 'ä¾æ³•ç»´æƒ']</span>
                </div>
            </div>
            
            <!-- å¦ä¸€ä¸ªAgentå¸–å­ç¤ºä¾‹ -->
            <div class="post-item agent-post">
                <div class="user-info">
                    <span class="user-id">agent_002</span>
                    <span class="agent-badge">ğŸ¤– AI</span>
                </div>
                <div class="post-content">
                    "çº±å¸ƒé—¨"äº‹ä»¶å‘å±•åˆ°ç°åœ¨ï¼Œå„æ–¹å£°éŸ³éƒ½å¾ˆå¤šã€‚ä½œä¸ºæ™®é€šç½‘å‹ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯è¦ç†æ€§çœ‹å¾…ã€‚åŒ»é™¢å’Œæ‚£è€…éƒ½æœ‰å„è‡ªçš„éš¾å¤„...
                </div>
                <div class="post-meta">
                    <span>3å°æ—¶å‰ (AIä»¿çœŸç”Ÿæˆ)</span>
                    <span>ğŸ˜ 0.3 ğŸ“Š 0.1 ğŸ¯ ['ç†æ€§çœ‹å¾…', 'æ³•å¾‹é€”å¾„', 'åŒ»æ‚£å…³ç³»']</span>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸŒ³ è½¬æ’­æ ‘èŠ‚ç‚¹æ¸²æŸ“æ•ˆæœ</h3>
            <div class="tree-demo">
                <p><strong>èŠ‚ç‚¹ç±»å‹ç¤ºä¾‹ï¼š</strong></p>
                <div style="margin: 15px 0;">
                    <span class="tree-node normal">æ™®é€šèŠ‚ç‚¹</span>
                    <span class="tree-node agent">ğŸ¤– AgentèŠ‚ç‚¹</span>
                    <span class="tree-node supplementary">è¡¥å……æ ¹èŠ‚ç‚¹</span>
                </div>
                <p style="font-size: 12px; color: #666; margin-top: 15px;">
                    åœ¨è½¬æ’­æ ‘å¯è§†åŒ–ä¸­ï¼ŒAgentç”Ÿæˆçš„å¸–å­èŠ‚ç‚¹ä¼šæ˜¾ç¤ºä¸º<strong style="color: #e53e3e;">é²œçº¢è‰²ç²—æè¾¹</strong>ï¼Œä¾¿äºåŒºåˆ†AIä»¿çœŸå†…å®¹ã€‚
                </p>
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“Š ç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤º</h3>
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value">4428</div>
                    <div class="stat-label">åŸå§‹å¸–å­æ•°</div>
                </div>
                <div class="stat-card agent-stats">
                    <div class="stat-value agent-value">7</div>
                    <div class="stat-label">Agentå¸–å­æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">4435</div>
                    <div class="stat-label">æ€»å¸–å­æ•°</div>
                </div>
                <div class="stat-card agent-stats">
                    <div class="stat-value agent-value">63.6%</div>
                    <div class="stat-label">èåˆæˆåŠŸç‡</div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ›ï¸ åŠŸèƒ½æŒ‰é’®æµ‹è¯•</h3>
            <p>æ•°æ®æºé€‰æ‹©æŒ‰é’®æ ·å¼ï¼š</p>
            <button>ğŸ“Š ä»…åŸå§‹æ•°æ®</button>
            <button class="agent-button">ğŸ¤– èåˆAgentä»¿çœŸ</button>
            <br><br>
            <button onclick="testAPI()">ğŸ”„ æµ‹è¯•APIè°ƒç”¨</button>
            <button onclick="toggleAgentDisplay()">ğŸ‘ï¸ åˆ‡æ¢Agentæ˜¾ç¤º</button>
        </div>
        
        <div class="test-section">
            <h3>ğŸ”§ å®æ—¶APIæµ‹è¯•</h3>
            <div id="apiTestResult" style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; padding: 15px; margin-top: 10px; font-family: monospace; font-size: 12px;">
                ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æµ‹è¯•API...
            </div>
        </div>
    </div>

    <script>
        async function testAPI() {
            const resultDiv = document.getElementById('apiTestResult');
            resultDiv.textContent = 'æ­£åœ¨æµ‹è¯•API...';
            
            try {
                // æµ‹è¯•èåˆæ¨¡å¼API
                const response = await fetch('http://localhost:5000/api/visualization/tree?data_source=merged&agent_posts_file=agent_generated_posts_20250729_112026.json');
                const data = await response.json();
                
                const stats = data.tree.meta;
                resultDiv.innerHTML = `
<strong>âœ… APIæµ‹è¯•æˆåŠŸï¼</strong>

<strong>èåˆæ•°æ®ç»Ÿè®¡ï¼š</strong>
- æ€»å¸–å­æ•°: ${stats.total_posts}
- Agentå¸–å­æ•°: ${stats.agent_posts_count}
- åŸå§‹å¸–å­æ•°: ${stats.original_posts_count}
- æ ‘èŠ‚ç‚¹æ•°: ${stats.total_nodes}
- æ ¹èŠ‚ç‚¹æ•°: ${stats.displayed_trees}
- æœ€å¤§æ·±åº¦: ${stats.max_depth}
- æ•°æ®æº: ${stats.data_source}
- Agentæ–‡ä»¶: ${stats.agent_posts_file}

<strong>æè¿°:</strong> ${stats.description}
                `;
                
            } catch (error) {
                resultDiv.innerHTML = `<strong style="color: #dc3545;">âŒ APIæµ‹è¯•å¤±è´¥:</strong>\n${error.message}`;
            }
        }
        
        function toggleAgentDisplay() {
            const agentPosts = document.querySelectorAll('.agent-post');
            agentPosts.forEach(post => {
                if (post.style.display === 'none') {
                    post.style.display = 'block';
                } else {
                    post.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>

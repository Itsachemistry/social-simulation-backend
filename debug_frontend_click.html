<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è°ƒè¯•å‰ç«¯ç‚¹å‡»é—®é¢˜</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .console { background: #f0f0f0; padding: 10px; margin: 10px 0; height: 300px; overflow-y: auto; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>å‰ç«¯APIè°ƒè¯•æµ‹è¯•</h1>
    
    <button onclick="testAgentsAPI()">æµ‹è¯•è·å–Agents API</button>
    <button onclick="testStartSimulation()">æµ‹è¯•å¯åŠ¨ä»¿çœŸAPI</button>
    <button onclick="clearConsole()">æ¸…ç©ºæ§åˆ¶å°</button>
    
    <div id="console" class="console"></div>

    <script>
        function log(message) {
            const console = document.getElementById('console');
            const time = new Date().toLocaleTimeString();
            console.innerHTML += `[${time}] ${message}<br>`;
            console.scrollTop = console.scrollHeight;
        }

        function clearConsole() {
            document.getElementById('console').innerHTML = '';
        }

        async function testAgentsAPI() {
            log('ğŸ” æµ‹è¯•è·å–Agents API...');
            try {
                const response = await fetch('http://localhost:5000/api/agents');
                log(`ğŸ“¡ çŠ¶æ€ç : ${response.status}`);
                
                if (response.ok) {
                    const data = await response.json();
                    log(`âœ… è·å–æˆåŠŸ: ${JSON.stringify(data, null, 2)}`);
                } else {
                    log(`âŒ è¯·æ±‚å¤±è´¥: ${response.statusText}`);
                }
            } catch (error) {
                log(`ğŸ’¥ ç½‘ç»œé”™è¯¯: ${error.message}`);
            }
        }

        async function testStartSimulation() {
            log('ğŸš€ æµ‹è¯•å¯åŠ¨ä»¿çœŸAPI...');
            
            const testConfig = {
                config: {
                    llm_test_mode: true,
                    enable_llm_full_monitoring: true,
                    total_steps: 3,
                    time_slices: 5
                },
                agent_configs: [
                    {
                        agent_id: "test_agent_1",
                        name: "æµ‹è¯•ç”¨æˆ·1",
                        personality: "å¼€æœ—æ´»æ³¼",
                        network_influence: 0.5,
                        content_preference: ["ç§‘æŠ€", "å¨±ä¹"]
                    }
                ]
            };
            
            log(`ğŸ“‹ å‘é€é…ç½®: ${JSON.stringify(testConfig, null, 2)}`);
            
            try {
                const response = await fetch('http://localhost:5000/api/simulation/start', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(testConfig)
                });
                
                log(`ğŸ“¡ çŠ¶æ€ç : ${response.status}`);
                
                if (response.ok) {
                    const data = await response.json();
                    log(`âœ… å¯åŠ¨æˆåŠŸ: ${JSON.stringify(data, null, 2)}`);
                } else {
                    const errorText = await response.text();
                    log(`âŒ å¯åŠ¨å¤±è´¥: ${errorText}`);
                }
            } catch (error) {
                log(`ğŸ’¥ ç½‘ç»œé”™è¯¯: ${error.message}`);
            }
        }

        // é¡µé¢åŠ è½½æ—¶è¾“å‡ºåŸºæœ¬ä¿¡æ¯
        window.onload = function() {
            log('ğŸŒ é¡µé¢åŠ è½½å®Œæˆ');
            log(`ğŸ“ å½“å‰URL: ${window.location.href}`);
            log('âœ… è°ƒè¯•å·¥å…·å·²å°±ç»ª');
        };
    </script>
</body>
</html>
